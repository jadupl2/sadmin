--------------------------------------------------------------------------------
Prepare History log         ==> Make sure first line contain Highlight 
cd /sadmin
git status | less           ==> Approve or Not to commit ?
git add .                   ==> If All OK
git status                  ==> Check if some file were deleted
git rm file_deleted         ==> To Delete in repository file that was deleted
                                example : git rm "sam/files/.svn/*"
git status                  ==> Should have everything to be committed
git commit                  ==> Add History log in commit log (Icu@9am!)
                                Can we specify history log file in commit
git status                  ==> Should be clean now
git log --pretty=oneline    ==> Get commit Hash (First Line)
git tag                     ==> Display a list of current tag
git tag [VERSION] [HASH]    ==> Associate tag with hash of commit
git tag                     ==> List current tag (Should include new tag)
git remote -v               ==> List Remote Repositories (SHould have BitBucket)
                                origin	https://jadupl2@bitbucket.org/jadupl2/sadmin.git (fetch)
                                origin	https://jadupl2@bitbucket.org/jadupl2/sadmin.git (push)
git push origin             ==> Push (Commit to remote repository)
git push --tags origin      ==> Push Tags to remote repository

Check on Bitbucket if commit is ok with tags.
https://bitbucket.org/product

--------------------------------------------------------------------------------
root@nomad:/sadmin# git push origin 
To https://jadupl2@bitbucket.org/jadupl2/sadmin.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://jadupl2@bitbucket.org/jadupl2/sadmin.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes before pushing again.  See the 'Note about
fast-forwards' section of 'git push --help' for details.
root@nomad:/sadmin# 


root@nomad:/sadmin# git pull origin master
From https://bitbucket.org/jadupl2/sadmin
 * branch            master     -> FETCH_HEAD
Merge made by recursive.
 README.md |   29 +++++++++++++++++++++++++++++
 1 files changed, 29 insertions(+), 0 deletions(-)
 create mode 100644 README.md
root@nomad:/sadmin# 
root@nomad:/sadmin# 
root@nomad:/sadmin# 


root@nomad:/sadmin# git push origin
Counting objects: 45, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (24/24), done.
Writing objects: 100% (26/26), 20.66 KiB, done.
Total 26 (delta 16), reused 0 (delta 0)
To https://jadupl2@bitbucket.org/jadupl2/sadmin.git
   cdbbcbf..2367d0d  master -> master
root@nomad:/sadmin# 

--------------------------------------------------------------------------------

root@nomad/sadmin # git status
# On branch master
# Changed but not updated:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#	modified:   bin/sadm_backup_to_tgz_on_ds410.sh
#	modified:   bin/sadm_create_cfg2html.sh
#	modified:   bin/sadm_create_sar_perfdata.sh
#	modified:   bin/sadm_create_server_info.sh
#	modified:   bin/sadm_daily_data_collection.sh
#	modified:   bin/sadm_fs_recreate.sh
#	modified:   bin/sadm_fs_save_info.sh
#	modified:   bin/sadm_nmon_midnight_restart.sh
#	modified:   bin/sadm_nmon_respawn.sh
#	modified:   bin/sadm_osupdate_client.sh
#	modified:   bin/sadm_osupdate_server.sh
#	modified:   bin/sadm_rsync_sadmin.sh
#	modified:   bin/sadm_storix_check_old_backup.sh
#	modified:   bin/sadm_storix_cleanup_images.sh
#	modified:   bin/sadm_storix_rsync_iso.sh
#	modified:   bin/sadm_template.sh
#	modified:   bin/sadm_terabyte_cleanup_images.sh
#	modified:   bin/sadm_wrapper.sh
#	deleted:    bin/sys_update_server_hardware.py
#	modified:   cfg/sadmin.cfg
#	deleted:    cfg/sadmin.cfg~
#	deleted:    lib/old/coco.sh
#	deleted:    lib/old/jlib_curse.sh
#	deleted:    lib/old/jlib_lvm.sh
#	deleted:    lib/old/jlib_misc.sh
#	deleted:    lib/old/sadm_lib.txt
#	deleted:    lib/old/sysinfo.sh
#	deleted:    lib/rear.sh
#	modified:   lib/sadm_lib_screen.sh
#	modified:   lib/sadm_lib_std.sh
#	modified:   lib/sadm_test_library.sh
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#	bin/sadm_daily_database_update.py
#	bin/sadm_epoch_arm
#	bin/sadm_housekeeping.sh
#	lib/coco.sh
#	lib/coco2.sh
no changes added to commit (use "git add" and/or "git commit -a")


--------------------------------------------------------------------------------
root@nomad/sadmin # git add .

--------------------------------------------------------------------------------
root@nomad/sadmin # git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#	modified:   bin/sadm_backup_to_tgz_on_ds410.sh
#	modified:   bin/sadm_create_cfg2html.sh
#	modified:   bin/sadm_create_sar_perfdata.sh
#	modified:   bin/sadm_create_server_info.sh
#	modified:   bin/sadm_daily_data_collection.sh
#	new file:   bin/sadm_daily_database_update.py
#	new file:   bin/sadm_epoch_arm
#	modified:   bin/sadm_fs_recreate.sh
#	modified:   bin/sadm_fs_save_info.sh
#	new file:   bin/sadm_housekeeping.sh
#	modified:   bin/sadm_nmon_midnight_restart.sh
#	modified:   bin/sadm_nmon_respawn.sh
#	modified:   bin/sadm_osupdate_client.sh
#	modified:   bin/sadm_osupdate_server.sh
#	modified:   bin/sadm_rsync_sadmin.sh
#	modified:   bin/sadm_storix_check_old_backup.sh
#	modified:   bin/sadm_storix_cleanup_images.sh
#	modified:   bin/sadm_storix_rsync_iso.sh
#	modified:   bin/sadm_template.sh
#	modified:   bin/sadm_terabyte_cleanup_images.sh
#	modified:   bin/sadm_wrapper.sh
#	modified:   cfg/sadmin.cfg
#	new file:   lib/coco.sh
#	new file:   lib/coco2.sh
#	modified:   lib/sadm_lib_screen.sh
#	modified:   lib/sadm_lib_std.sh
#	modified:   lib/sadm_test_library.sh
#
# Changed but not updated:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#	deleted:    bin/sys_update_server_hardware.py
#	deleted:    cfg/sadmin.cfg~
#	deleted:    lib/old/coco.sh
#	deleted:    lib/old/jlib_curse.sh
#	deleted:    lib/old/jlib_lvm.sh
#	deleted:    lib/old/jlib_misc.sh
#	deleted:    lib/old/sadm_lib.txt
#	deleted:    lib/old/sysinfo.sh
#	deleted:    lib/rear.sh
#
--------------------------------------------------------------------------------
root@nomad/sadmin # git rm bin/sys_update_server_hardware.py
rm 'bin/sys_update_server_hardware.py'

--------------------------------------------------------------------------------
root@nomad/sadmin # git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#	modified:   bin/sadm_backup_to_tgz_on_ds410.sh
#	modified:   bin/sadm_create_cfg2html.sh
#	modified:   bin/sadm_create_sar_perfdata.sh
#	modified:   bin/sadm_create_server_info.sh
#	modified:   bin/sadm_daily_data_collection.sh
#	renamed:    bin/sys_update_server_hardware.py -> bin/sadm_daily_database_update.py
#	new file:   bin/sadm_epoch_arm
#	modified:   bin/sadm_fs_recreate.sh
#	modified:   bin/sadm_fs_save_info.sh
#	new file:   bin/sadm_housekeeping.sh
#	modified:   bin/sadm_nmon_midnight_restart.sh
#	modified:   bin/sadm_nmon_respawn.sh
#	modified:   bin/sadm_osupdate_client.sh
#	modified:   bin/sadm_osupdate_server.sh
#	modified:   bin/sadm_rsync_sadmin.sh
#	modified:   bin/sadm_storix_check_old_backup.sh
#	modified:   bin/sadm_storix_cleanup_images.sh
#	modified:   bin/sadm_storix_rsync_iso.sh
#	modified:   bin/sadm_template.sh
#	modified:   bin/sadm_terabyte_cleanup_images.sh
#	modified:   bin/sadm_wrapper.sh
#	modified:   cfg/sadmin.cfg
#	new file:   lib/coco.sh
#	new file:   lib/coco2.sh
#	modified:   lib/sadm_lib_screen.sh
#	modified:   lib/sadm_lib_std.sh
#	modified:   lib/sadm_test_library.sh
#
# Changed but not updated:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#	deleted:    cfg/sadmin.cfg~
#	deleted:    lib/old/coco.sh
#	deleted:    lib/old/jlib_curse.sh
#	deleted:    lib/old/jlib_lvm.sh
#	deleted:    lib/old/jlib_misc.sh
#	deleted:    lib/old/sadm_lib.txt
#	deleted:    lib/old/sysinfo.sh
#	deleted:    lib/rear.sh
#
root@nomad/sadmin # 
--------------------------------------------------------------------------------
root@nomad/sadmin # git rm lib/old/jlib_curse.sh lib/old/jlib_lvm.sh  lib/old/jlib_misc.sh lib/old/sadm_lib.txt lib/old/sysinfo.sh lib/rear.sh
rm 'lib/old/jlib_curse.sh'
rm 'lib/old/jlib_lvm.sh'
rm 'lib/old/jlib_misc.sh'
rm 'lib/old/sadm_lib.txt'
rm 'lib/old/sysinfo.sh'
rm 'lib/rear.sh'


--------------------------------------------------------------------------------
root@nomad/sadmin # git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#	modified:   bin/sadm_backup_to_tgz_on_ds410.sh
#	modified:   bin/sadm_create_cfg2html.sh
#	modified:   bin/sadm_create_sar_perfdata.sh
#	modified:   bin/sadm_create_server_info.sh
#	modified:   bin/sadm_daily_data_collection.sh
#	renamed:    bin/sys_update_server_hardware.py -> bin/sadm_daily_database_update.py
#	new file:   bin/sadm_epoch_arm
#	modified:   bin/sadm_fs_recreate.sh
#	modified:   bin/sadm_fs_save_info.sh
#	new file:   bin/sadm_housekeeping.sh
#	modified:   bin/sadm_nmon_midnight_restart.sh
#	modified:   bin/sadm_nmon_respawn.sh
#	modified:   bin/sadm_osupdate_client.sh
#	modified:   bin/sadm_osupdate_server.sh
#	modified:   bin/sadm_rsync_sadmin.sh
#	modified:   bin/sadm_storix_check_old_backup.sh
#	modified:   bin/sadm_storix_cleanup_images.sh
#	modified:   bin/sadm_storix_rsync_iso.sh
#	modified:   bin/sadm_template.sh
#	modified:   bin/sadm_terabyte_cleanup_images.sh
#	modified:   bin/sadm_wrapper.sh
#	modified:   cfg/sadmin.cfg
#	deleted:    cfg/sadmin.cfg~
#	new file:   lib/coco.sh
#	new file:   lib/coco2.sh
#	deleted:    lib/old/coco.sh
#	deleted:    lib/old/jlib_curse.sh
#	deleted:    lib/old/jlib_lvm.sh
#	deleted:    lib/old/jlib_misc.sh
#	deleted:    lib/old/sadm_lib.txt
#	deleted:    lib/old/sysinfo.sh
#	deleted:    lib/rear.sh
#	modified:   lib/sadm_lib_screen.sh
#	modified:   lib/sadm_lib_std.sh
#	modified:   lib/sadm_test_library.sh
#
root@nomad/sadmin # 
--------------------------------------------------------------------------------
root@nomad/sadmin # git commit -m "Working Screen Library - V 0.70" 
[master 0ac23bb] Working Screen Library - V 0.70
 35 files changed, 1122 insertions(+), 1091 deletions(-)
 rename bin/{sys_update_server_hardware.py => sadm_daily_database_update.py} (100%)
 create mode 100755 bin/sadm_epoch_arm
 create mode 100755 bin/sadm_housekeeping.sh
 delete mode 100644 cfg/sadmin.cfg~
 create mode 100755 lib/coco.sh
 create mode 100755 lib/coco2.sh
 delete mode 100755 lib/old/coco.sh
 delete mode 100755 lib/old/jlib_curse.sh
 delete mode 100755 lib/old/jlib_lvm.sh
 delete mode 100755 lib/old/jlib_misc.sh
 delete mode 100644 lib/old/sadm_lib.txt
 delete mode 100755 lib/old/sysinfo.sh
 delete mode 100755 lib/rear.sh
root@nomad/sadmin # 
--------------------------------------------------------------------------------
root@nomad/sadmin # git status
# On branch master
nothing to commit (working directory clean)
root@nomad/sadmin # 
--------------------------------------------------------------------------------
root@nomad/sadmin # git log --name-status
commit 0ac23bba1d5fba4a3118341e48a75113f226dde5
Author: Jacques Duplessis <duplessis.jacques@gmail.com>
Date:   Tue Dec 22 18:40:26 2015 -0500

    Working Screen Library - V 0.70

M       bin/sadm_backup_to_tgz_on_ds410.sh
M       bin/sadm_create_cfg2html.sh
M       bin/sadm_create_sar_perfdata.sh
M       bin/sadm_create_server_info.sh
M       bin/sadm_daily_data_collection.sh
A       bin/sadm_daily_database_update.py
A       bin/sadm_epoch_arm
M       bin/sadm_fs_recreate.sh
M       bin/sadm_fs_save_info.sh
A       bin/sadm_housekeeping.sh
M       bin/sadm_nmon_midnight_restart.sh
M       bin/sadm_nmon_respawn.sh
M       bin/sadm_osupdate_client.sh
M       bin/sadm_osupdate_server.sh
M       bin/sadm_rsync_sadmin.sh
M       bin/sadm_storix_check_old_backup.sh
M       bin/sadm_storix_cleanup_images.sh
M       bin/sadm_storix_rsync_iso.sh
M       bin/sadm_template.sh
M       bin/sadm_terabyte_cleanup_images.sh
M       bin/sadm_wrapper.sh
D       bin/sys_update_server_hardware.py
M       cfg/sadmin.cfg
D       cfg/sadmin.cfg~
A       lib/coco.sh
A       lib/coco2.sh
D       lib/old/coco.sh
D       lib/old/jlib_curse.sh
D       lib/old/jlib_lvm.sh
D       lib/old/jlib_misc.sh
D       lib/old/sadm_lib.txt
D       lib/old/sysinfo.sh
D       lib/rear.sh
M       lib/sadm_lib_screen.sh
M       lib/sadm_lib_std.sh
M       lib/sadm_test_library.sh

commit 8f3186492d537378f912506cd4f93a2d1a4fd230
Author: Jacques Duplessis <duplessis.jacques@gmail.com>
Date:   Sat Dec 19 08:02:00 2015 -0500

    New git ignore file (notes dir)

M       .gitignore

commit 7667e533f02c075de5b35686ec8dd6e6e924f100
Author: Jacques Duplessis <duplessis.jacques@gmail.com>
Date:   Wed Dec 16 16:03:53 2015 -0500

    Now mu .gitignore file works correctly

D       .Trash-0/files/dr/nomad.maison.ca.err
D       .Trash-0/files/dr/nomad.maison.ca.html
D       .Trash-0/files/dr/nomad.maison.ca.partitions.save
D       .Trash-0/files/dr/nomad.maison.ca.txt
D       .Trash-0/files/hwd.2/nomad.maison.ca.err
:
root@nomad/sadmin # 
--------------------------------------------------------------------------------
root@nomad/sadmin # git tag 0.70.0 0ac23bba1d5f
root@nomad/sadmin # 

root@nomad/sadmin # 
--------------------------------------------------------------------------------
root@nomad/sadmin # git remote -v
origin	https://jadupl2@bitbucket.org/jadupl2/sadmin.git (fetch)
origin	https://jadupl2@bitbucket.org/jadupl2/sadmin.git (push)
root@nomad/sadmin # 
--------------------------------------------------------------------------------
root@nomad/sadmin # git push origin
Counting objects: 145, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (81/81), done.
Writing objects: 100% (83/83), 51.40 KiB, done.
Total 83 (delta 62), reused 0 (delta 0)
To https://jadupl2@bitbucket.org/jadupl2/sadmin.git
   4f42cf8..0ac23bb  master -> master
root@nomad/sadmin # 

--------------------------------------------------------------------------------
root@nomad/sadmin # git push --tags origin
Total 0 (delta 0), reused 0 (delta 0)
To https://jadupl2@bitbucket.org/jadupl2/sadmin.git
 * [new tag]         0.70.0 -> 0.70.0
 * [new tag]         0.71.0 -> 0.71.0
root@nomad/sadmin # 

--------------------------------------------------------------------------------
root@nomad~ # git tag
fatal: Not a git repository (or any of the parent directories): .git
root@nomad~ # cd /sadmin
root@nomad/sadmin # git tag
0.70.0
root@nomad/sadmin # 

--------------------------------------------------------------------------------
root@nomad/sadmin # git log --pretty=oneline
0ac23bba1d5fba4a3118341e48a75113f226dde5 Working Screen Library - V 0.70
8f3186492d537378f912506cd4f93a2d1a4fd230 New git ignore file (notes dir)
7667e533f02c075de5b35686ec8dd6e6e924f100 Now mu .gitignore file works correctly
9e12e5e13a84a6a1b5fc981847ac771656f2f364 Commit everything to enable .gitignore
4f42cf8f801f158b2dd91e49195b256b18770751 chnage sadm_lib_sceen again
afec98d3eb366f3dd77ea748e78f431f5ea1a498 test change conflict from linux
0e6d7801bac434dfd6d63c1a69b609eec5385abf Signed-off-by: Jacques Duplessis <duplessis.jacques@gmail.com>
3ec0172acdcdd3b0c4880f800d28fc7c742c528c Add Library for screen and change to .gitignore
1875bc6c544588aa09aac3bed5b03de02993eba6 Version Stable avec Lib for Aix - Just before creating new DB Signed-off-by: Jacques Duplessis <duplessis.jacques@gmail.com>
00eb2c35e12d3e6f248eef0924adff24c19ac50a working set - with aix lib 2
1e307323f9e5fd7e8f0ead72e8a5fd6752146c54 working set - with aix lib
4691e391b34b8ba6542f072d76c043ff5046fb8b commit all
47230e96ed53e87624b7ab91cc89d0aa056ebcd8 Commit of 4 November
5fc57cf35b059c4a9017cc6989d66c07388e5eb7 Epoch source initial
b0c24479c028e1520fded1381ce40ae26914f6f3 Author name added
eabcd804b71a6e90a9f22425bc54e42134cc9087 log added
7ea782862153930cfdd81a3eeb6e6afa73a9be10 log added
74dec829250db35cbd51b71277ff406561a7dd2b stable point 2
35655f4f2234ce1e7641fa5d23b840d8936a6847 stable point
11c1a6858071d329b9ab0fd81a00dd9fd3984adb working graph and sysinfo update
40151a8de88103b40e8c1959e514c5910729be30 Change 25 Feb 2015 - install puppet - osupdate
706ab508267a2d4007621086bb6d23f8f380a346 Initial commit
root@nomad/sadmin # 



--------------------------------------------------------------------------------
root@nomad/sadmin # git show 0.70.0
commit 0ac23bba1d5fba4a3118341e48a75113f226dde5
Author: Jacques Duplessis <duplessis.jacques@gmail.com>
Date:   Tue Dec 22 18:40:26 2015 -0500

    Working Screen Library - V 0.70

diff --git a/bin/sadm_backup_to_tgz_on_ds410.sh b/bin/sadm_backup_to_tgz_on_ds410.sh
index c4d5f5d..9fe9773 100755
--- a/bin/sadm_backup_to_tgz_on_ds410.sh
+++ b/bin/sadm_backup_to_tgz_on_ds410.sh
@@ -33,7 +33,7 @@ TMP_FILE1="${TMP_DIR}/${INST}_1.$$"                 ; export TMP_FILE1      # Sc
 TMP_FILE2="${TMP_DIR}/${INST}_2.$$"                 ; export TMP_FILE2      # Script Tmp File2
 TMP_FILE3="${TMP_DIR}/${INST}_3.$$"                 ; export TMP_FILE3      # Script Tmp File3
 LOG_FILE="${LOG_DIR}/${HOSTNAME}_${INST}.log"       ; export LOG_FILE       # Script Log file
-LOG_STAT="${LOG_DIR}/rc.${HOSTNAME}_${INST}.log"    ; export LOG_STAT       # Script Log Statistic file
+LOG_STAT="${LOG_DIR}/${HOSTNAME}_${INST}.rch"       ; export LOG_STAT       # Script Log Statistic file
 
 # List of Directories to Backup
 BACKUP_DIR="/cadmin /sadmin /home /storix /sysadmin /sysinfo /aix_data /gitrepo "
diff --git a/bin/sadm_create_cfg2html.sh b/bin/sadm_create_cfg2html.sh
index eb828bc..ac2d501 100755
--- a/bin/sadm_create_cfg2html.sh
+++ b/bin/sadm_create_cfg2html.sh
@@ -13,7 +13,7 @@
 #===================================================================================================
 #set -x
 
-#set -x
+
 #***************************************************************************************************
 #  USING SADMIN LIBRARY SETUP
 #   THESE VARIABLES GOT TO BE DEFINED PRIOR TO LOADING THE SADM LIBRARY (sadm_lib_std.sh) SCRIPT
@@ -30,7 +30,7 @@ VER='2.2'                                      ; export VER             # Progra
 OUTPUT2=1                                      ; export OUTPUT2         # Write log 0=log 1=Scr+Log
 INST=`echo "$PN" | awk -F\. '{ print $1 }'`    ; export INST            # Get Current script name
 TPID="$$"                                      ; export TPID            # Script PID
-GLOBAL_ERROR=0                                 ; export GLOBAL_ERROR    # Global Error Return Code
+SADM_EXIT_CODE=0                               ; export SADM_EXIT_CODE  # Global Error Return Code
 BASE_DIR=${SADMIN:="/sadmin"}                  ; export BASE_DIR        # Script Root Base Directory
 #
 [ -f ${BASE_DIR}/lib/sadm_lib_std.sh ]    && . ${BASE_DIR}/lib/sadm_lib_std.sh     # sadm std Lib
@@ -64,6 +64,13 @@ Debug=true                                      ; export Debug          # Debug
 #===================================================================================================
     sadm_start                                                          # Init Env. Dir & RC/Log File
 
+    if ! $(sadm_is_root)                                                # Only ROOT can run Script
+        then sadm_logger "This script must be run by the ROOT user"     # Advise User Message
+             sadm_logger "Process aborted"                              # Abort advise message
+             sadm_stop 1                                                # Close and Trim Log
+             exit 1                                                     # Exit To O/S
+    fi
+    
     # Make sure that cfg2html is accessible on the server
     CFG2HTML=`which cfg2html >/dev/null 2>&1`                           # Locate cfg2html
     if [ $? -eq 0 ]                                                     # if found
@@ -81,10 +88,10 @@ Debug=true                                      ; export Debug          # Debug
     # Run CFG2HTML
     sadm_logger "Running : $CFG2HTML -H -o $DR_DIR"
     $CFG2HTML -H -o $DR_DIR >>$LOG 2>&1
-    GLOBAL_ERROR=$?
+    SADM_EXIT_CODE=$?
 
:



